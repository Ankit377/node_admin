{"code":"!function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)n.d(r,o,function(n){return e[n]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p=\"\",n(n.s=0)}([function(e,n,t){t(1)},function(e,n,t){(function(e){function t(n,o,u,c){\"function\"==typeof u&&(c=u,u=null),u=u||r(o,\"field\");var l=n.collection(i.collection),f=r(o,\"step\");l.findAndModify({_id:o,field:u},null,{$inc:{seq:f}},{upsert:!0,new:!0},function(r,i){r?11e3==r.code?e.nextTick(t.bind(null,n,o,u,c)):c(r):i.value&&i.value.seq?c(null,i.value.seq):c(null,i.seq)})}function r(e,n){return o[e]&&void 0!==o[e][n]?o[e][n]:i[n]}var o={},i={collection:\"counters\",field:\"_id\",step:1};n.getNextSequence=function(e,n,r,o){\"function\"==typeof r&&(o=r,r=null),\"connecting\"==e._state?e.on(\"open\",function(e,i){t(i,n,r,o)}):t(e,n,r,o)},n.mongoosePlugin=function(e,t){var r=(t=t||{}).field||i.field;if(e.options._id){var u={};u[r]={type:Number,unique:!0,required:!0},e.add(u)}e.pre(\"save\",function(e){var i=this;i.isNew&&i.collection?(!o[i.collection.name]&&(o[i.collection.name]=t),n.getNextSequence(i.db.db,i.collection.name,r,function(n,t){i[r]=t,e(n)})):e()})},n.setDefaults=function(e){for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n])}}).call(this,t(2))},function(e){function n(){throw new Error(\"setTimeout has not been defined\")}function t(){throw new Error(\"clearTimeout has not been defined\")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(n){try{return l.call(null,e,0)}catch(n){return l.call(this,e,0)}}}function o(){p&&s&&(p=!1,s.length?d=s.concat(d):h=-1,d.length&&i())}function i(){if(!p){var e=r(o);p=!0;for(var n=d.length;n;){for(s=d,d=[];++h<n;)s&&s[h].run();h=-1,n=d.length}s=null,p=!1,function(e){if(f===clearTimeout)return clearTimeout(e);if((f===t||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{f(e)}catch(n){try{return f.call(null,e)}catch(n){return f.call(this,e)}}}(e)}}function u(e,n){this.fun=e,this.array=n}function c(){}var l,f,a=e.exports={};!function(){try{l=\"function\"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f=\"function\"==typeof clearTimeout?clearTimeout:t}catch(e){f=t}}();var s,d=[],p=!1,h=-1;a.nextTick=function(e){var n=Array(arguments.length-1);if(1<arguments.length)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];d.push(new u(e,n)),1!==d.length||p||r(i)},u.prototype.run=function(){this.fun.apply(null,this.array)},a.title=\"browser\",a.browser=!0,a.env={},a.argv=[],a.version=\"\",a.versions={},a.on=c,a.addListener=c,a.once=c,a.off=c,a.removeListener=c,a.removeAllListeners=c,a.emit=c,a.prependListener=c,a.prependOnceListener=c,a.listeners=function(){return[]},a.binding=function(){throw new Error(\"process.binding is not supported\")},a.cwd=function(){return\"/\"},a.chdir=function(){throw new Error(\"process.chdir is not supported\")},a.umask=function(){return 0}}]);","extractedComments":[]}